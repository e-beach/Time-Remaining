!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/platform-browser"),require("@angular/forms"),require("moment")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/platform-browser","@angular/forms","moment"],t):t(e.ng2-datepicker=e.ng2-datepicker||{},e.ng.core,e.ng.common,e.ng.platformBrowser,e.ng.forms,e.moment)}(this,function(e,t,n,i,o,a){"use strict";function r(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t){return!(!e||!t)&&e.isSame(t,"d")}function c(e,t){return e?t?e.concat(t):e:t}function h(e,t){return{providers:c(e.providers,t.providers),inputs:c(e.inputs,t.inputs),outputs:c(e.outputs,t.outputs),queries:Object.assign({},e.queries,t.queries),host:Object.assign({},e.host,t.host),selector:t.selector||e.selector,exportAs:t.exportAs||e.exportAs}}function p(e,t){return Object.assign(h(e,t),{template:t.template||t.templateUrl?t.template:e.template,templateUrl:t.template||t.templateUrl?t.templateUrl:e.templateUrl,styles:t.styles||t.styleUrls?t.styles:e.styles,styleUrls:t.styles||t.styleUrls?t.styleUrls:e.styleUrls,moduleId:t.templateUrl||t.styleUrls?t.moduleId:!t.template&&e.templateUrl||!t.styles&&e.styleUrls?e.moduleId:void 0,viewProviders:c(e.viewProviders,t.viewProviders),animations:c(e.animations,t.animations),entryComponents:c(e.entryComponents,t.entryComponents),changeDetection:t.changeDetection||e.changeDetection,encapsulation:t.encapsulation||e.encapsulation,interpolation:t.interpolation||e.interpolation})}function f(e){return{provide:o.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return e}),multi:!0}}function d(e){return{provide:y,useExisting:t.forwardRef(function(){return e})}}a="default"in a?a.default:a,function(e){e[e.disabled=0]="disabled",e[e.enabled=1]="enabled",e[e.inRange=2]="inRange",e[e.selected=3]="selected"}(e.DateState||(e.DateState={}));var y=function(){function n(){this._value=this.EMPTY_VALUE,this.onDateChange=new t.EventEmitter,this.onStateChange=function(){},this.hasStateChanged=!1}return n.extendConfig=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return h({inputs:["minDate","maxDate"],outputs:["onDateChange"],providers:[d(t)]},e)},Object.defineProperty(n.prototype,"EMPTY_VALUE",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(e){e!==this._value&&(this.onDateChange.emit(this._value=e||this.EMPTY_VALUE),this.hasStateChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=e,this.hasStateChanged=!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=e,this.hasStateChanged=!0},enumerable:!0,configurable:!0}),n.prototype.registerOnStateChange=function(e){this.onStateChange=e},n.prototype.ngDoCheck=function(){this.hasStateChanged&&this.onStateChange(),this.hasStateChanged=!1},n.prototype.getDay=function(e){return e?a([e.year,e.month,e.date]):null},n.prototype.isDateValid=function(e){return e&&(!this.minDate||e.isSameOrAfter(this.minDate))&&(!this.maxDate||e.isSameOrBefore(this.maxDate))},n.prototype.isDateSelectable=function(e){return e&&this.isDateValid(e)&&!this.isDateSelected(e)},n.prototype.getDateState=function(t){return t?this.isDateSelected(t)?e.DateState.selected:this.isDateInSelectRange(t)?e.DateState.inRange:this.isDateValid(t)?e.DateState.enabled:void 0:e.DateState.disabled},n}(),g=function(){function e(e,t){var n=this;if(this.cd=e,this.select=t,this.showSixWeek=!1,this.weekDaysName=a().localeData().weekdaysShort(),this.months=[],this.onTouchedCallback=function(){},this.onChangeCallback=function(){},!t)throw"No SelectDirective specified. DatePicker must be coupled with a SelectDirective";this.select.registerOnStateChange(function(){n.updateCalendarDays()}),this.select.onDateChange.subscribe(function(e){n.onChangeCallback(e)})}return e.extendConfig=function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return p({inputs:["locale","showSixWeek"],providers:[f(n)],changeDetection:t.ChangeDetectionStrategy.OnPush},e)},Object.defineProperty(e.prototype,"locale",{get:function(){return this._locale},set:function(e){this._locale=!(!e||0==e.length)&&e;var t=this.applyLocale(a()).localeData(),n=t.weekdaysShort();this.weekDaysName=n.concat(n.splice(0,t.firstDayOfWeek()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"month",{get:function(){return this.months[0]},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this.select.value=e},e.prototype.registerOnChange=function(e){this.onChangeCallback=e},e.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},Object.defineProperty(e.prototype,"value",{get:function(){return this.select.value},set:function(e){this.select.value=e},enumerable:!0,configurable:!0}),e.prototype.applyLocale=function(e){return this.locale&&e.locale(this.locale),e},e.prototype.generateCalendarDays=function(e){var t=a(),n=this.applyLocale(e.clone());n.subtract(n.weekday(),"d");var i=this.applyLocale(e.clone().endOf("month"));if(i.add(6-i.weekday(),"d"),this.showSixWeek){var o=i.diff(n,"weeks");o<5&&i.add(5-o,"weeks")}for(var r=[];n.isBefore(i);)r.push({date:n.clone(),state:this.select.getDateState(n),isToday:t.isSame(n,"day"),isCurrDisplayMonth:n.month()==e.month()}),n=n.add(1,"d");return r},e.prototype.updateCalendarDays=function(){for(var e=0,t=this.months;e<t.length;e++)for(var n=t[e],i=n.days,o=0,a=i.length;o<a;o++){var r=i[o],s=this.select.getDateState(r.date);r.state!=s&&(i[o]={date:r.date,isToday:r.isToday,isCurrDisplayMonth:r.isCurrDisplayMonth,state:s})}this.cd.markForCheck()},e.prototype.newMonth=function(e){var t=a([e.year(),e.month()]);return{date:t,days:this.generateCalendarDays(t)}},e.prototype.initMonths=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];this.months=t.map(function(t){return e.newMonth(t)}),this.cd.markForCheck()},e.prototype.setMonth=function(e,t){void 0===t&&(t=0),this.months[t]=this.newMonth(e),this.cd.markForCheck()},e}(),m=function(e){function n(t,i,o,a){var r=this;e.call(this,o,a),this._class=n.CONTAINER_CLASS,this.opened=!1,this.viewFormat="LL",this.el=i.nativeElement,t.listenGlobal("window","click",function(e){r.opened&&e.target&&r.el!==e.target&&!r.el.contains(e.target)&&r.close()})}return r(n,e),n.extendConfig=function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return p(e.extendConfig.call(this,{templateUrl:"./ionic.component.html",styleUrls:["ionic.css"],inputs:["class","expanded","opened","viewFormat"]},n),t)},Object.defineProperty(n.prototype,"class",{get:function(){return this._class},set:function(e){this._class=n.CONTAINER_CLASS+" "+e},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){this.initMonths(a())},n.prototype.onDateclick=function(e,t){e.preventDefault(),t.date.isSame(this.month.date,"M")&&(this.select.selectDate(t.date),this.close())},n.prototype.nextMonth=function(){this.setMonth(this.month.date.add(1,"M"))},n.prototype.prevMonth=function(){this.setMonth(this.month.date.subtract(1,"M"))},n.prototype.toggle=function(){this.opened=!this.opened},n.prototype.open=function(){this.opened=!0},n.prototype.close=function(){this.opened=!1},n.prototype.inputClick=function(){this.onTouchedCallback(),this.toggle()},n.CONTAINER_CLASS="ui-kit-calendar-container",n=s([t.Component(n.extendConfig({selector:"datepicker-ionic"},n)),l("design:paramtypes",["function"==typeof(i="undefined"!=typeof t.Renderer&&t.Renderer)&&i||Object,"function"==typeof(o="undefined"!=typeof t.ElementRef&&t.ElementRef)&&o||Object,"function"==typeof(u="undefined"!=typeof t.ChangeDetectorRef&&t.ChangeDetectorRef)&&u||Object,"function"==typeof(c="undefined"!=typeof y&&y)&&c||Object])],n);var i,o,u,c}(g),v=function(e){function n(){e.apply(this,arguments)}return r(n,e),Object.defineProperty(n.prototype,"EMPTY_VALUE",{get:function(){return null},enumerable:!0,configurable:!0}),n.prototype.setValue=function(e){e&&!this.isDateValid(e)||(this.value=e)},n.prototype.ngOnChanges=function(e){this.isDateValid(this.value)||(this.value=null)},n.prototype.selectDate=function(e){return!!this.isDateSelectable(e)&&(this.value=e,!0)},n.prototype.unselectDate=function(e){return!!this.isDateSelected(e)&&(this.value=null,!0)},n.prototype.isDateSelected=function(e){return u(e,this.value)},n.prototype.isDateInSelectRange=function(e){return this.isDateSelected(e)},n=s([t.Directive(y.extendConfig({selector:"[singleSelect]"},n)),l("design:paramtypes",[])],n)}(y),D=function(e){function n(){e.apply(this,arguments),this._limit=1/0}return r(n,e),Object.defineProperty(n.prototype,"EMPTY_VALUE",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"limit",{get:function(){return this._limit},set:function(e){this._limit=e},enumerable:!0,configurable:!0}),n.prototype.setValue=function(e){var t=this;e!=this.value&&(this.value=(e||[]).filter(function(e){return t.isDateValid(e)}).splice(0,e.length-this.limit).map(function(e){return t.getDay(e)}).sort(function(e,t){return e-t}))},n.prototype.ngOnChanges=function(e){var t=this,n=this.value;if(e.minDate||e.maxDate){var i=n.filter(function(e){return t.isDateValid(e)});i.length<n.length&&(n=i)}e.limit&&n.length>this.limit&&(n=n.slice(0,this.limit)),this.value=n},n.prototype.selectDate=function(e){return!!this.isDateSelectable(e)&&void(this.value.length<this.limit?this.value=this.value.concat([e]).sort(function(e,t){return e-t}):this.value=[e])},n.prototype.unselectDate=function(e){var t=this.value.filter(function(t){return!u(t,e)});return t.length<this.value.length&&(this.value=t,!0)},n.prototype.isDateSelected=function(e){return!!this.value.find(function(t){return u(t,e)})},n.prototype.isDateInSelectRange=function(e){return this.value.length>1&&e.isBetween(this.value[0],this.value[this.value.length-1],"day","[]")},s([t.Input("multiSelect"),l("design:type",Object)],n.prototype,"limit",null),n=s([t.Directive(y.extendConfig({selector:"[multiSelect]"},n)),l("design:paramtypes",[])],n)}(y),b=function(){function e(e,t){this.onChange=function(e){},this.start=e.start,this.end=e.end,this.onChange=t}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},set:function(e){this._start=e,this.onChange(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},set:function(e){this._end=e,this.onChange(this)},enumerable:!0,configurable:!0}),e}(),C=function(e){function n(){e.apply(this,arguments)}return r(n,e),Object.defineProperty(n.prototype,"EMPTY_VALUE",{get:function(){return{start:null,end:null}},enumerable:!0,configurable:!0}),n.prototype.setValue=function(e){var t=this;e!==this.value&&(this.isDateValid(e.start)||(e.start=null),this.isDateValid(e.end)||(e.end=null),this.value=new b(e,function(e){t.onDateChange.emit(e),t.hasStateChanged=!0}))},n.prototype.ngOnChanges=function(e){var t=this.value.start,n=this.value.end;this.isDateValid(this.value.start)||(t=null),this.isDateValid(this.value.end)||(n=null),t===this.value.start&&n===this.value.end||(this.value={start:t,end:n})},n.prototype.selectDate=function(e){if(!this.isDateSelectable(e))return!1;if(this.value.start)if(this.value.end){var t=Math.abs(e.diff(this.value.start)),n=Math.abs(e.diff(this.value.end));t<n?this.value.start=e:this.value.end=e}else this.value.end=e;else this.value.start=e;return!0},n.prototype.unselectDate=function(e){if(e){if(u(e,this.value.start))return this.value.start=null,!0;if(u(e,this.value.end))return this.value.end=null,!0}return!1},n.prototype.isDateSelected=function(e){return e&&(u(e,this.value.start)||u(e,this.value.end))},n.prototype.isDateInSelectRange=function(e){var t=this.value.start,n=this.value.end;return t&&n&&e.isSameOrAfter(t,"d")&&e.isSameOrBefore(n,"d")},n=s([t.Directive(y.extendConfig({selector:"[rangeSelect]"},n)),l("design:paramtypes",[])],n)}(y),S=function(){function e(){}return e.prototype.transform=function(e,t,n){void 0===t&&(t="LL");var i;return(i=e&&e instanceof Array?e[0]:e)?(n&&(i=a(i),i.locale(n)),i.format(t)):""},e=s([t.Pipe({name:"momentFormat"}),l("design:paramtypes",[])],e)}(),O=function(){function n(){}return n.prototype.transform=function(t){var n={enabled:!1,inRange:!1,selected:!1,today:t.isToday,currDisplayMonth:t.isCurrDisplayMonth};return t.state>e.DateState.disabled&&(n[e.DateState[t.state]]=!0),n},n=s([t.Pipe({name:"dayClasses"}),l("design:paramtypes",[])],n)}(),k=[m,v,D,C,S,O],w=function(){function e(){}return e=s([t.NgModule({imports:[n.CommonModule,i.BrowserModule,o.FormsModule],declarations:k,exports:k}),l("design:paramtypes",[])],e)}();e.DatePickerModule=w,e.BaseSelect=y,e.SingleSelectDirective=v,e.MultiSelectDirective=D,e.RangeSelectDirective=C,e.DatePickerTemplate=g,e.DatePickerIonicComponent=m,e.extendDirConfig=h,e.extendConfig=p,e.formProvider=f,e.selectProvider=d,Object.defineProperty(e,"__esModule",{value:!0})});